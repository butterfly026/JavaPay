function xymPage(options){this.options=options;if(!this.options.elem){layer.msg("未传入分页元素，分页初始化失败");return}if(!this.options.page){this.options["page"]=1}if(!this.options.pageSize){this.options["pageSize"]=20}if(!this.options.totalCount){this.options["totalCount"]=0}if(typeof this.options.callFunc!="function"){this.options.callFunc=function(page,pageSize){}}this.$dom=$(this.options.elem);this.totalPage=0;this.showPageDiv=function(){if(this.totalPage==0){this.$dom.html('<li><a class="pginfo">'+this.options.totalCount+"条,"+this.totalPage+"页</a></li>");return}var $str="";var $startPage=this.options.page-1;if(this.totalPage>6){if(this.totalPage-$startPage<6){$startPage=this.totalPage-5}}else{$startPage=1}if($startPage<1){$startPage=1}for(var i=$startPage;i<=this.totalPage;i++){if(i==this.options.page){$str+='<li><a class="active">'+i+"</a></li>"}else{if(i>$startPage+2&&i<this.totalPage-2){$str+="<li><a>...</a></li>";i=this.totalPage-3}else{$str+='<li pg="'+i+'"><a href="javascript:void(0)">'+i+"</a></li>"}}}if(this.options.page==1&&this.options.page==this.totalPage){}else{if(this.options.page==1){$str+='<li pg="end"><a href="javascript:void(0)">»</a></li>'}else{if(this.options.page==this.totalPage){$str='<li pg="first"><a href="javascript:void(0)">«</a></li>'+$str}else{$str='<li pg="first"><a href="javascript:void(0)">«</a></li>'+$str+'<li pg="end"><a href="javascript:void(0)">»</a></li>'}}}$str+='<li><a class="pginfo">'+this.options.totalCount+"条,"+this.totalPage+"页</a></li>";this.$dom.html($str);var that=this;this.$dom.find("li").on("click",function(){var pg=$(this).attr("pg");if(typeof pg!="undefined"){if(pg=="first"){that.firstpage()}else{if(pg=="end"){that.endpage()}else{that.pageClick(pg)}}}})};this.pageClick=function(p){this.options.callFunc(p,this.options.pageSize)};this.firstpage=function(){if(this.options.page==1){return}this.pageClick(1)};this.endpage=function(){if(this.options.page==this.totalPage){return}this.pageClick(this.totalPage)};this.refreshPage=function(totalCount,page,pageSize){if(typeof totalCount!="undefined"){this.options.totalCount=totalCount}if(typeof page!="undefined"){this.options.page=page}if(typeof pageSize!="undefined"){this.options.pageSize=pageSize}this.totalPage=Math.ceil(this.options.totalCount/this.options.pageSize);this.showPageDiv()};this.refreshPage();return this};